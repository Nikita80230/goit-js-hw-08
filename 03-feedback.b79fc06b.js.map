{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAGA,IAAIC,EAAO,GAEX,MAAMC,EAAOC,SAASC,cAAc,kBACpCF,EAAKG,iBAAiB,SAAS,EAAAN,EAAAO,WAK/B,SAAkBC,GAEhBN,EAAKM,EAAMC,OAAOC,MAAQF,EAAMC,OAAOE,MAGvCC,aAAaC,QAdH,sBAcgBC,KAAKC,UAAUb,MAVS,MACpDC,EAAKG,iBAAiB,UA4BtB,SAAkBE,GAChBA,EAAMQ,iBACNC,QAAQC,IAAIhB,GAEZM,EAAMW,cAAcC,QACpBR,aAAaS,WAtCH,0BAiBZ,WACE,MAAMC,EAAWV,aAAaW,QAlBpB,uBAoBV,IAAID,EACF,OAEF,IACI,MAAME,EAAYV,KAAKW,MAAMH,GAC7BnB,EAAKuB,SAASC,MAAMhB,MAAQa,EAAUG,MACtCxB,EAAKuB,SAASE,QAAQjB,MAAQa,EAAUI,QACxC,MAAOC,GACPZ,QAAQC,IAAIW,EAAMnB,MAClBO,QAAQC,IAAIW,EAAMD,UAtBxBE","sources":["src/js/03-feedback.js"],"sourcesContent":["import { debounce } from \"lodash\";\n\nconst KEY = 'feedback-form-state';\nlet data = {};\n\nconst form = document.querySelector('.feedback-form');\nform.addEventListener(\"input\", debounce((fillForm), 300));\nform.addEventListener(\"submit\", onSubmit);\n\nloadData();\n\nfunction fillForm(event) {\n  \n  data[event.target.name] = event.target.value;\n  // data.message = form.elements.message.value;\n  \n  localStorage.setItem(KEY, JSON.stringify(data))\n}\n\nfunction loadData() {\n  const saveData = localStorage.getItem(KEY);\n\n  if(!saveData) {\n    return\n  }\n  try {\n      const validData = JSON.parse(saveData);\n      form.elements.email.value = validData.email;\n      form.elements.message.value = validData.message;\n    } catch (error) {\n      console.log(error.name);\n      console.log(error.message);\n    }\n  }\n\nfunction onSubmit(event) {\n  event.preventDefault()\n  console.log(data)\n  \n  event.currentTarget.reset();\n  localStorage.removeItem(KEY);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import throttle from 'lodash.throttle';\n\n// const KEY = 'feedback-form-state';\n// const formData = {};\n\n// const form = document.querySelector('.feedback-form');\n\n// form.addEventListener('submit', onFormSubmit);\n// form.addEventListener('input', throttle(onFormInput, 500));\n\n// updateForm();\n\n// function updateForm() {\n//   const savedData = localStorage.getItem(KEY);\n//   if (savedData) {\n//     const { email, message } = JSON.parse(savedData);\n//     form.email.value = email;\n//     form.message.value = message;\n//     formData.email = email;\n//     formData.message = message;\n//   }\n// }\n\n// function onFormInput(event) {\n//   formData.email = form.elements.email.value;\n//   formData.message = form.elements.message.value;\n//   localStorage.setItem(KEY, JSON.stringify(formData));\n// }\n\n// function onFormSubmit(event) {\n//   event.preventDefault();\n\n//   const formDataToSend = new FormData(event.currentTarget);\n//   formDataToSend.forEach((value, name) => {\n//     formData[name] = value;\n//   });\n\n//   event.currentTarget.reset();\n//   localStorage.removeItem(KEY);\n\n//   console.log(formData);\n// }\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$data","$945622fd0f572e60$var$form","document","querySelector","addEventListener","debounce","event","target","name","value","localStorage","setItem","JSON","stringify","preventDefault","console","log","currentTarget","reset","removeItem","saveData","getItem","validData","parse","elements","email","message","error","$945622fd0f572e60$var$loadData"],"version":3,"file":"03-feedback.b79fc06b.js.map"}